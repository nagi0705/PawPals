<h1>投稿一覧</h1>

<%= form_with(url: search_posts_path, method: :get, local: true) do %>
  <%= label_tag :query, "検索" %>
  <%= text_field_tag :query, params[:query] %>
  <%= submit_tag "検索", name: nil %>
<% end %>

<% @posts.each do |post| %>
  <div class="post">
    <h2><%= link_to post.title, post %></h2>
    <p><%= truncate(post.content, length: 100) %></p>
    <% if current_user.admin? || post.user == current_user %>
      <%= link_to '編集', edit_post_path(post), class: "btn btn-warning" %>
      <%= link_to '削除', post, method: :delete, data: { confirm: '本当に削除しますか？' }, class: "btn btn-danger" %>
    <% end %>
  </div>
<% end %>
